(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,t=document.querySelector(".feedback-msg"),a={name:{validate:e=>e.length>0,messages:{required:"Имя не может быть пустым"}},email:{validate:t=>e.test(t),messages:{required:"Email не может быть пустым",invalid:"Некорректный email"}},message:{validate:e=>e.length<=10,messages:{invalid:"Длина сообщения не может превышать 10 символов"}}};function r(e,t){const a=document.createElement("p");a.className="error-msg",a.textContent=t,e.appendChild(a)}document.querySelector(".feedback-form__submit").addEventListener("click",(function(e){e.preventDefault(),function(){const e=[{name:"name",element:document.querySelector(".feedback-form__name")},{name:"email",element:document.querySelector(".feedback-form__email")},{name:"message",element:document.querySelector(".feedback-form__text")}];let n=!0;if(e.forEach((e=>{const t=a[e.name],m=t.validate(e.element.value.trim());!function(e,t,a){const n=e.value.trim(),m=e.parentElement;m.querySelectorAll(".error-msg").forEach((e=>e.remove())),n.length<1&&t.messages.required?(r(m,t.messages.required),e.classList.add("error")):n.length>0&&!a?(r(m,t.messages.invalid),e.classList.add("error")):e.classList.remove("error")}(e.element,t,m),m||(n=!1)})),n){t.classList.remove("not-visible");const e=document.querySelector("form");console.log(e,new FormData(e)),fetch("form.php",{method:"POST",body:new FormData(e)}),document.querySelector(".feedback-form").remove()}}()}))}))})();